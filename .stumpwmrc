;; Basic StumpWM Hacks
;; Sanjoy Das <sanjoy@playingwithpointers.com>

(in-package :stumpwm)

(defun shell-command (command)
  "Run a shell command and display output to screen. This must be used in a functional side-effects-free style! If a program does not exit of its own accord, Stumpwm might hang!"
  (check-type command string)
  (echo-string (current-screen) (run-shell-command command t)))

(define-stumpwm-command "shell-command" ((command :string "sh: " :string))
  (check-type command string)
  (shell-command command))

(set-font "-xos4-terminus-medium-r-normal--14-140-72-72-c-80-iso8859-15")

(defcommand pull-urxvt () ()
  "Start / pull *the* URxvt instance into this frame."
  (run-or-pull "exec rxvt-unicode -fn '7X14' -e /usr/bin/tmux" '(:class "URxvt")))

(define-key *root-map* (kbd "C-f")  "exec evince")
(define-key *root-map* (kbd "d")    "exec rxvt-unicode -fn '7X14' -e /usr/bin/tmux")
(define-key *root-map* (kbd "C-d")  "exec rxvt-unicode -fn '7X14' -e /usr/bin/tmux")
(define-key *root-map* (kbd "c")    "pull-urxvt")
(define-key *root-map* (kbd "C-c")  "pull-urxvt")
(define-key *root-map* (kbd ">")    "gnext")
(define-key *root-map* (kbd "<")    "gprev")
(define-key *root-map* (kbd "C-q")  "exec lightbulb")
(define-key *root-map* (kbd "q")    "exec lightbulb")
(define-key *root-map* (kbd "P")    "pull-window-by-number")
(define-key *tile-group-root-map* (kbd "C-TAB") "fnext")
