;; Basic StumpWM Hacks
;; Sanjoy Das <sanjoy@playingwithpointers.com>

(in-package :stumpwm)

(defun shell-command (command)
  "Run a shell command and display output to screen. This must be used in a functional side-effects-free style! If a program does not exit of its own accord, Stumpwm might hang!"
  (check-type command string)
  (echo-string (current-screen) (run-shell-command command t)))

(define-stumpwm-command "shell-command" ((command :string "sh: " :string))
  (check-type command string)
  (shell-command command))

(defcommand iceweasel () ()
  "Start iceweasel unless it is already running, in which case focus it."
  (run-or-raise "iceweasel" '(:class "Iceweasel")))

(defcommand pidgin() ()
  "Start pidgin unless it is already running, in which case focus it."
  (run-or-raise "pidgin" '(:class "Pidgin")))

(defcommand irc () ()
  "Start irc unless it is already running, in which case focus it."
  (run-or-raise "xchat" '(:class "Xchat")))

(define-key *root-map* (kbd "C-f")  "exec evince")
(define-key *root-map* (kbd "c")    "exec rxvt-unicode -fn '7X14' -e /bin/zsh")
(define-key *root-map* (kbd "C-c")  "exec rxvt-unicode -fn '7X14' -e /bin/zsh")
(define-key *root-map* (kbd ">")    "gnext")
(define-key *root-map* (kbd "<")    "gprev")
(define-key *root-map* (kbd "C-q")  "exec lightbulb")
(define-key *root-map* (kbd "q")    "exec lightbulb")
(define-key *root-map* (kbd "P")    "pull-window-by-number")
(define-key *tile-group-root-map* (kbd "C-TAB") "fnext")
